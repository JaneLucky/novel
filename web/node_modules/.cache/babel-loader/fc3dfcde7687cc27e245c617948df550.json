{"remainingRequest":"d:\\TeduStudy\\VueUI\\novelReader\\web\\node_modules\\babel-loader\\lib\\index.js!d:\\TeduStudy\\VueUI\\novelReader\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!d:\\TeduStudy\\VueUI\\novelReader\\web\\src\\views\\Article.vue?vue&type=script&lang=js","dependencies":[{"path":"d:\\TeduStudy\\VueUI\\novelReader\\web\\src\\views\\Article.vue","mtime":1556421390162},{"path":"d:\\TeduStudy\\VueUI\\novelReader\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"d:\\TeduStudy\\VueUI\\novelReader\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"d:\\TeduStudy\\VueUI\\novelReader\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Toast } from 'mint-ui';\nimport Header from \"../components/Header\";\nexport default {\n  name: \"Article\",\n  data: function data() {\n    return {\n      bid: null,\n      sid: null,\n      scrTop: null,\n      article: \"\",\n      title: \"\",\n      len: 1,\n      ifshowControls: false,\n      groupTitle: \"\",\n      titleList: [],\n      flagToggle: true,\n      toggleImg: \"http://127.0.0.1:3000/black.png\"\n    };\n  },\n  methods: {\n    awaysShow: function awaysShow() {\n      this.ifshowControls = true;\n    },\n    toToggle: function toToggle() {\n      if (this.flagToggle) {\n        this.toggleImg = \"http://127.0.0.1:3000/white.png\";\n        this.flagToggle = false;\n      } else {\n        this.toggleImg = \"http://127.0.0.1:3000/black.png\";\n        this.flagToggle = true;\n      }\n    },\n    toContentList: function toContentList() {\n      this.$router.push(\"/contentList?bid=\".concat(this.bid));\n    },\n    loadDetails: function loadDetails() {\n      var _this2 = this;\n\n      this.axios.get(\"http://127.0.0.1:3000/book/article\", {\n        params: {\n          bid: this.bid,\n          sid: this.sid\n        }\n      }).then(function (result) {\n        // console.log(result.data);\n        _this2.article = result.data.msg;\n        _this2.title = result.data.title; // console.log(this.article);\n\n        _this2.len = result.data.len;\n        _this2.groupTitle = result.data.groupTitle; // console.log(this.groupTitle);\n\n        _this2.titleList = result.data.titleList;\n        console.log(_this2.titleList);\n      });\n    },\n    toNextPage: function toNextPage() {\n      if (parseInt(this.sid) >= this.len) {\n        Toast(\"已经是最后一章了\");\n      } else {\n        this.sid = parseInt(this.sid) + 1;\n        this.$router.push(\"/article?bid=\".concat(this.bid, \"&sid=\").concat(this.sid, \"&scrTop=0\"));\n      }\n    },\n    toPrevPage: function toPrevPage() {\n      if (parseInt(this.sid) == 1) {\n        Toast(\"已经是第一章了\");\n      } else {\n        this.sid = parseInt(this.sid) - 1;\n        this.$router.push(\"/article?bid=\".concat(this.bid, \"&sid=\").concat(this.sid, \"&scrTop=0\"));\n      }\n    },\n    //显示和隐藏控件按钮（头部和底部）\n    showControls: function showControls() {\n      if (this.ifshowControls == false) {\n        this.ifshowControls = true;\n      } else {\n        this.ifshowControls = false;\n      }\n    },\n    toBookIndex: function toBookIndex() {\n      this.$router.push(\"/detailList?bid=\".concat(this.bid));\n    },\n    //回到书架\n    toBookShelf: function toBookShelf() {\n      this.$router.push(\"/myBook\");\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    window.addEventListener('scroll', function () {\n      var top = document.documentElement.scrollTop || document.body.scrollTop || window.pageYOffset; //要做兼容 在模拟器能正常获取scrolltop在微信h5页面和手机的浏览器页面一直为0\n      // console.log(top);\n    });\n    document.documentElement.scrollTop = 100;\n  },\n  created: function created() {\n    // localStorage.clear();\n    this.bid = this.$route.query.bid;\n    this.sid = this.$route.query.sid;\n    this.loadDetails(); // console.table(localStorage);\n\n    if (!this.checkStorage(this.bid)) {\n      this.addToStorage(this.bid);\n    } else {\n      // console.log(this.bid,this.sid);\n      // console.table(document.documentElement.scrollTop);\n      this.setLocalStorage(this.bid, this.sid, 0);\n    } // console.table(localStorage);\n\n  },\n  watch: {\n    \"$route\": function $route() {\n      this.bid = this.$route.query.bid;\n      this.sid = this.$route.query.sid;\n      this.loadDetails();\n    }\n  },\n  components: {\n    Header: Header\n  }\n};",{"version":3,"sources":["Article.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"container\" style=\"margin-bottom:0;padding-bottom:0\">\r\n        <Header></Header>\r\n        <div class=\"session\" v-tap.stop=\"showControls\" :class=\"flagToggle?'toggleWhite':'toggleBlack'\">\r\n            <div class=\"top\" v-show=\"ifshowControls\">\r\n                <p>{{groupTitle}}</p>\r\n                <p v-tap=\"toBookShelf\">书架</p>\r\n            </div>\r\n            <div class=\"main\" v-swipeleft=\"toNextPage\" v-swiperight=\"toPrevPage\">\r\n                <h3>{{title}}</h3>\r\n                <p v-for=\"(item, index) in article\" :key=\"index\">{{item}}</p>\r\n            </div>\r\n\r\n            <div class=\"bottom\" v-show=\"ifshowControls\" @click.stop=\"awaysShow\">\r\n                <ul>\r\n                    <li v-tap=\"toContentList\">\r\n                        <img src=\"http://127.0.0.1:3000/bookList.png\" alt=\"\">\r\n                        <p>目录</p>\r\n                    </li>\r\n                    <li v-tap=\"toToggle\">\r\n                        <img :src=\"toggleImg\" alt=\"\">\r\n                        <p>{{flagToggle?\"夜间\":\"白天\"}}</p>\r\n                        </li>\r\n                    <li>\r\n                        <img src=\"http://127.0.0.1:3000/reset.png\" alt=\"\">\r\n                        <p>设置</p>\r\n                    </li>\r\n                    <li v-tap=\"toBookIndex\">\r\n                        <img src=\"http://127.0.0.1:3000/book.png\" alt=\"\">\r\n                        <p>封面</p>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <!-- <div class=\"boolList\" @click.stop=\"userClick=true\">\r\n                <ul>\r\n                    <li v-for=\"(item, index) in titleList\" :key=\"index\">\r\n                        <router-link :to=\"`/article?bid=${bid}&sid=${parseInt(item)}`\">{{item}}</router-link>\r\n                    </li>\r\n                </ul>\r\n            </div> -->\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { Toast } from 'mint-ui';\r\nimport Header from \"../components/Header\"\r\nexport default {\r\n    name:\"Article\",\r\n    data(){\r\n        return {\r\n            bid:null,\r\n            sid:null,\r\n            scrTop:null,\r\n            article:\"\",\r\n            title:\"\",\r\n            len:1,\r\n            ifshowControls:false,\r\n            groupTitle:\"\",\r\n            titleList:[],\r\n            flagToggle:true,\r\n            toggleImg:\"http://127.0.0.1:3000/black.png\"\r\n        }\r\n    },\r\n    methods:{\r\n        awaysShow(){\r\n            this.ifshowControls=true;\r\n        },\r\n        toToggle(){\r\n            if(this.flagToggle){\r\n                this.toggleImg=\"http://127.0.0.1:3000/white.png\";\r\n                this.flagToggle=false;\r\n            }else{\r\n                this.toggleImg=\"http://127.0.0.1:3000/black.png\";\r\n                this.flagToggle=true;\r\n            }\r\n        },\r\n        toContentList(){\r\n            this.$router.push(`/contentList?bid=${this.bid}`);\r\n        },\r\n        loadDetails(){\r\n            this.axios.get(\"http://127.0.0.1:3000/book/article\",{\r\n                params:{\r\n                    bid:this.bid,\r\n                    sid:this.sid\r\n                }\r\n            }).then((result)=>{\r\n                // console.log(result.data);\r\n                this.article=result.data.msg;\r\n                this.title=result.data.title\r\n                // console.log(this.article);\r\n                this.len=result.data.len;\r\n                this.groupTitle=result.data.groupTitle;\r\n                // console.log(this.groupTitle);\r\n                this.titleList=result.data.titleList;\r\n                console.log(this.titleList);\r\n            });\r\n        },\r\n        toNextPage(){\r\n            if(parseInt(this.sid)>=this.len){\r\n                Toast(\"已经是最后一章了\");\r\n            }else{\r\n                this.sid=parseInt(this.sid)+1;\r\n                this.$router.push(`/article?bid=${this.bid}&sid=${this.sid}&scrTop=0`);\r\n            }\r\n        },\r\n        toPrevPage(){\r\n            if(parseInt(this.sid)==1){\r\n                Toast(\"已经是第一章了\");\r\n            }else{\r\n                this.sid=parseInt(this.sid)-1;\r\n                this.$router.push(`/article?bid=${this.bid}&sid=${this.sid}&scrTop=0`);\r\n            }\r\n        },\r\n        //显示和隐藏控件按钮（头部和底部）\r\n        showControls(){\r\n            if(this.ifshowControls==false){\r\n                this.ifshowControls=true;\r\n            }else{\r\n                this.ifshowControls=false;\r\n            }\r\n        },\r\n        toBookIndex(){\r\n            this.$router.push(`/detailList?bid=${this.bid}`);\r\n        },\r\n        //回到书架\r\n        toBookShelf(){\r\n            this.$router.push(\"/myBook\");\r\n        }\r\n    },\r\n    mounted(){\r\n        let _this=this\r\n        window.addEventListener('scroll',function(){\r\n        let top = document.documentElement.scrollTop || document.body.scrollTop || window.pageYOffset//要做兼容 在模拟器能正常获取scrolltop在微信h5页面和手机的浏览器页面一直为0\r\n            // console.log(top);\r\n        });\r\n            document.documentElement.scrollTop=100;\r\n\r\n    },\r\n    created(){\r\n        // localStorage.clear();\r\n        this.bid=this.$route.query.bid;\r\n        this.sid=this.$route.query.sid;\r\n        this.loadDetails();\r\n        // console.table(localStorage);\r\n        if(!this.checkStorage(this.bid)){\r\n            this.addToStorage(this.bid);\r\n        }else{\r\n            // console.log(this.bid,this.sid);\r\n            // console.table(document.documentElement.scrollTop);\r\n            this.setLocalStorage(this.bid,this.sid,0);\r\n        }\r\n        // console.table(localStorage);\r\n\r\n    },\r\n    watch:{\r\n        \"$route\"(){\r\n            this.bid=this.$route.query.bid;\r\n            this.sid=this.$route.query.sid;\r\n            this.loadDetails();\r\n        }\r\n    },\r\n    components:{\r\n        Header\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\nul li{\r\n    margin: 0;\r\n    padding: 0;\r\n    list-style: none;\r\n}\r\n.container .session .boolList{\r\n    position: fixed;\r\n    width: 80%;\r\n    height: 100%;\r\n    background:Ivory;\r\n    top: 0;\r\n    left: 0;\r\n}\r\n.toggleWhite{\r\n    background: #fff;\r\n}\r\n.toggleBlack{\r\n    background: #888;\r\n}\r\n.toggleBlack h3{\r\n    color: #ccc;\r\n}\r\n.toggleBlack p{\r\n    color: #ccc;\r\n}\r\n.container .session .boolList ul{\r\n    padding: 3rem;\r\n}\r\n.container .session .boolList ul li{\r\n    padding: 0.5rem;\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n}\r\n.container .session .boolList ul li a{\r\n    color: #888;\r\n    font-size: 1.2rem;\r\n}\r\n\r\n\r\n.container .top,.container .bottom{\r\n    background: #54C6C5;\r\n    width: 100%;\r\n    position: fixed;\r\n    height: 5rem;\r\n}\r\n.container .top{\r\n    top:0;\r\n}\r\n.container .bottom{\r\n    bottom:0;\r\n}\r\n.container .top p:first-child{\r\n    color: #fff;\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n}\r\n.container .top p:last-child{\r\n    color: #fff;\r\n    position: absolute;\r\n    bottom: 0;\r\n    right: 1rem;\r\n    border: 1px solid #fff;\r\n    padding: 0 0.5rem;\r\n\r\n}\r\n.container .bottom ul{\r\n    margin: 0;\r\n    padding: 0.8rem 0 0 0;\r\n    display: flex;\r\n    justify-content: space-around;\r\n}\r\n.container .bottom ul>li{\r\n    width: 25%;\r\n    margin: 0 auto;\r\n    text-align: center;\r\n}\r\n.container .bottom ul>li img{\r\n    width:30%;\r\n    margin: 0 auto;\r\n    text-align: center;\r\n}\r\n.container .bottom ul>li p{\r\n    color:#fff;\r\n    margin: 0 auto;\r\n    text-align: center;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n.clearFixed::after{\r\n    content: \"\";\r\n    display: block;\r\n    clear: both;\r\n}\r\n.container .main{\r\n    margin: 0 1rem;\r\n    padding: 6rem 0;\r\n}\r\n.container .main p{\r\n    font-size:1.2rem;\r\n    line-height: 1.8rem;\r\n}\r\n.container .main h3{\r\n    padding: 0 1rem 1rem 1rem;\r\n}\r\n</style>\r\n\r\n"],"sourceRoot":"src\\views"}]}